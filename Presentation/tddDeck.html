<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>TDD Training</title>
		<meta name="author" content="Sabby Anandan">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/custom.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">		
		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<link rel="stylesheet" href="lib/css/smoothness/jquery-ui-1.10.3.custom.min.css">
		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<h1>Test-driven Development</h1><br>										
					<medium>Training #1</medium> 
					<br/>	
					<br/>
					<p>
						<small>Sabby Anandan</small> 
					</p>
				</section>

				<section>
					<h1>Goal</h1>
					<blockquote>
						<p>
							&ldquo;To increase customer satisfaction and service through more frequent delivery of <b><u>value</u></b>.&rdquo;
						</p>
					</blockquote>					
				</section>	
				
				<section>										
					<h1>Code</h1>
					<blockquote>
						<p class="image fragment roll-in" data-fragment-index="1"><img src="img/badcode.png" style="border:none;"></p>
						<p class="image fragment roll-in image" data-fragment-index="2"><img src="img/code2.png" style="border:none;"></p>	
						<small><footer class="fragment" data-fragment-index="2">Source: http://abstrusegoose.com/strips/you_down_wit_OPC-yeah_you_know_me.png/</footer></small>
					</blockquote>
				</section>

				<section>					
					<blockquote>
						<p>
							<h3>&ldquo;The most powerful force in the universe is compound interest.&rdquo;</h3><br>
							<small><footer>Albert Einstein</footer></small>
						</p>
					</blockquote>
				</section>	

				<section>										
					<h1>Bugs</h1>
					<blockquote cite="http://apprenticecoder.wordpress.com/">
						<p class="fragment roll-in image"><img src="img/bugcost.png" style="border:none;"></p><br>	
						<small><footer class="fragment">Source: Lessons Learned in Software Testing: A Context-Driven Approach by Cem Kaner, James Bach and Bret Pettichord</footer></small>
					</blockquote>
				</section>

				<section>
						<h1>Solution?</h1>						
						<p class="fragment roll-in image"><img src="img/nosilver.png" style="border:none;">
						<p class="fragment"><b>Testing: Early > Often > More</b></p>						
				</section>

				<section>
					<section>
						<h1>TDD</h1>				
						<blockquote>
							<p><span>"Software development process that relies on the repetition of a very short development cycle."</span><br><span><small><footer>Developed by: Kent Beck</footer></small></span></p>
						</blockquote>		
					</section>
					<section data-state="alert">
						<h1>See it fail</h2>						
					</section>
					<section data-state="blackout">
						<h1>Change little</h1>						
					</section>
					<section data-state="mint">
						<h1>See it succeed</h1>						
					</section>
				</section>
								
				<section>
					<h1>Rhythm</h1><br>						
					<p>
						<ol>
							<li class="fragment roll-in">Quickly <strong>add</strong> a test</li>
							<li class="fragment roll-in">Run the test and see it <strong>fail</strong></li>
							<li class="fragment roll-in">Make a <strong><em>little</em></strong> change</li>
							<li class="fragment roll-in">Run the test and <em>see</em> it <span class="highlight-green"><strong>succeed</strong></span></li>
							<li class="fragment roll-in">Refactor and <strong><em>remove</em></strong> <span class="highlight-blue">duplication</span></li>
						</ol>								
					</p>					
				</section>				

				<section>
					<h2>Arrange Act Assert</h2><br>
					<pre class="fragment"><code data-trim contenteditable>
@Test
public void test() {	
    String input = "abc";
	
    String result = Util.reverse(input);
	
    assertEquals("Arrange Act Assert - Reverse", "cba", result);
}
					</code></pre>					
				</section>

				<section>
					<section>
						<h1>Demo!</h1>					
					</section>
					<section>
						<h2>Scenario</h2><br>
						<p>Simple arithmetic operations</p>					
					</section>
				</section>

				<section>
					<h1>Testing Scenarios</h1><br>
					<ul class="fragment">
						<li>New Feature</li>
						<li>Bug Fixing</li>
						<li>Legacy Code</li>						
					</ul>
				</section>

				<section>
					<h1>New Feature</h1>					
					<p>
						<img src="img/newcode.png" style="border:none;">
					</p>
				</section>

				<section>
					<section>
						<h1>Demo!</h1>					
					</section>
					<section>
						<h2>Scenario</h2><br>
						<p>Performing <b>CRUD</b> operations</p>					
					</section>
					<section>
						<h1>EasyMock</h1><br>
						<p><a href="#/12/3">What is it?</a></p>					
					</section>
					<section data-state="sunset">
						<h2><em>EasyMock.createMock()</em></h2>						
						<h2><em>EasyMock.expect()</em></h2>						
						<h2><em>EasyMock.replay()</em></h2>						
						<h2><b>.testYourFunction()</b></h2>						
						<h2><em>assert()</em></h2>						
						<h2><em>EasyMock.verify()</em></h2>						
					</section>
					<section><h2>EasyMock Features</h2><br>
						<p class="fragment">Simulate calls</p>
						<pre class="fragment"><code data-trim contenteditable>
EasyMock.expectLastCall().times(3);
EasyMock.expectLastCall().atLeastOnce();
EasyMock.expectLastCall().anyTimes();
						</code></pre>
						<p class="fragment">Method with <em>void</em> return type</p>
						<pre class="fragment"><code data-trim contenteditable>
EasyMock.expectLastCall();
						</code></pre>
						<p class="fragment">Simulate exception</p>
						<pre class="fragment"><code data-trim contenteditable>
EasyMock.expect(mock.execute()).addThrow(expectedException);
						</code></pre>
						<p class="fragment">Simulate object <b>[Great for TDD!]</b></p>
						<pre class="fragment"><code data-trim contenteditable>
EasyMock.expect(mock.getRate(EasyMock.anyObject()).andReturn(2.5);
						</code></pre>							
					</section>					
					<section><h2>EasyMock Example</h2><br>
												<pre class="fragment"><code data-trim contenteditable>
// Create a mock
TestInterface mock = EasyMock.createMock(TestInterface.class);
// Record behavior
EasyMock.expect(mock.doSomeStuff("arg")).andReturn("thisValue");
// Replay behavior
EasyMock.replay(mock);
// Execute the actual code
String value = test.invoke() // assume invoke() calls doSomeStuff()
// Assert outcome
assertEquals(value, "thisValue");
// Verify behavior
EasyMock.verify(mock);
						</code></pre>							
					</section>						
					<section><h2>EasyMock Limitations</h2><br>
						<ul class="fragment">
							<li>Cannot mock <em>static</em></li>
							<li>Cannot mock <em>private</em></li>
							<li>Cannot mock <em>final</em></li>									
						</ul><br><br>
						<p class="fragment"><a href="#/12/1">Let's see a Demo!</a></p>
					</section>
				</section>

				<section>
					<h1>Bug Fixing</h1>					
					<p>
						<img src="img/bugfix.png" style="border:none;">
					</p>
				</section>

				<section>
					<section>
						<h1>Demo!</h1>					
					</section>					
					<section>
						<h2>Scenario</h2><br>
						<p>Radio button is <b><u>not defaulting</u></b> in the detail page</p>
					</section>
					<section>
						<h2>Scenario</h2><br>
						<p><b>"Assigned To"</b> is reset to <b><em>DEFAULT</em></b> on detail page</p>
					</section>
				</section>

				<section>
					<h1>Legacy Code</h1><br>
					<h1 class="fragment">=</h1>														
					<p><h1 class="fragment">Technical Debt</h1></p>														
				</section>				

				<section>
					<h1>Experience?</h1>
					<p>
						<img class="fragment roll-in" src="img/legacy.png" style="border:none;">
					</p>
				</section>

				<section>
					<section>
						<h2>Patterns for TDD</h2><br>
						<p class="fragment"><em>Test</em> (verb) = <b>to evaluate</b></p> 
						<p class="fragment"><em>Test</em> (noun) = <b>procedure leading to acceptance/rejection</b></p>					
						<blockquote class="fragment">		
							<p class="fragment">Gerry Weinberg's <b>Influence diagram</b></p><br>					
							<img class="fragment roll-in" src="img/spiral.png" style="border:none;">						
							<small><footer class="fragment">Source: The “no time for testing” death spiral, Kent Beck</footer></small>							
						</blockquote>											
					</section>
					<section>
						<h1>How?</h1><br>
						<p>
							<div class="columnOne">
								<img class="fragment roll-in" src="img/stressloop.png" style="border:none;">
							</div>
							<div class="columnTwo fragment fade-in">
								<br>
								<br>
								<br>								
								<h1 class="big">Test Automation</h1>
							</div>												
						</p>						
					</section>
				</section>	

				<section>
					<h2>Things to Remember</h2><br>
					<p class="fragment">Isolated Test</p>
					<p class="fragment">Test List</p>
					<p class="fragment">Test First</p>
					<p class="fragment">Assert Test</p>
				</section>							

				<section>
					<section>
						<h1>Red Bar Patterns</h1><br>
						<p>When you write tests | Where you write tests | When you stop writing</p>
					</section>
					<section><h2>One Step Test</h2><br>
						<pre><code data-trim contenteditable>
plus()

minus()

divide()

multiply()
						</code></pre><br>
						<p>What to test first?</p><br>
						<p class="fragment"><b>Pick a test that will teach you something and that you are confident you can implement.</b></p>
					</section>
					<section><h2>Starter Test</h2><br>
						<p>Which test to start with?</p><br>
						<p class="fragment"><b>Start by testing a variant of an operation that doesn't do anything.</b></p> <br>
						<small class="fragment"><footer>Remember: Red/Green/Refactor = you want the loop to take just minutes</footer></small>
					</section>
					<section><h2>Learning Test</h2><br>
						<p>When do you write tests for external API's?</p><br>
						<p class="fragment"><b>Before the first time you are going to use the new API from the external package.</b></p>						
						<pre class="fragment"><code data-trim contenteditable>
RecordStore store;
@Before
public void setup() {
   store = new RecordStore();
}
@After
public void cleanup() {
   store = null;
}
@Test
public void testStore() {
   int id = store.addRecord("testRecord");
   assertEquals(1, store.getSizeByDesc("testRecord"));	
   assertEquals("testRecord", store.getDescById(id);	
}
						</code></pre>						
					</section>										
				</section>
				
				<section>
					<section>
						<h1>Testing Patterns</h1><br>
						<p>More-detailed techniques for writing tests</p>
					</section>
					<section><h2>Child Test</h2><br>
						<p>How do you get a test case running that turns out to be too big?</p><br>
						<p class="fragment"><b>Break it. Write smaller tests. Reintroduce the larger test case.</b></p>
					</section>
					<section><h2>Mock Object</h2><br>
						<p>Expensive or complicated resource dependency?</p><br>
						<p class="fragment"><b>Fake it (until you make it)</b></p> <br>						
					</section>									
				</section>
				
				<section>
					<section>
						<h1>Green Bar Patterns</h1><br>
						<img class="fragment roll-in" src="img/greenbar.png" style="border:none;">
					</section>
					<section><h1>Leverage Mocks</h1><br>						
					</section>
					<section><h1>Triangulate</h1><br>
						<p><b>Abstraction in Tests</b></p>
						<pre class="fragment"><code data-trim contenteditable>
@Test
public void test_addTwoNumbers_returnsSum() {
   assertEquals(4, plus(3, 1));
}

private int plus(int augend, int addend) {
   return 4;
}
						</code></pre>
						<pre class="fragment"><code data-trim contenteditable>
@Test							
public void test_addTwoNumbers_returnsSum() {
   assertEquals(4, plus(3, 1));
   assertEquals(7, plus(3, 4));
}
						</code></pre>
						<pre class="fragment"><code data-trim contenteditable>
private int plus(int augend, int addend) {
   return augend + addend;
}
						</code></pre><br>						
					</section>
					<section><h2>Obvious Implementation</h2><br>
						<p>How do you implement simple operations?</p><br>
						<p class="fragment"><b>Just implement them</b></p><br>						
					</section>
				</section>	

				<section>
					<section>
						<h1>Take Aways</h1><br>
					</section>
					<section><h2>How long your test steps be?</h2><br>
						<p class="fragment grow"><b>Tough - smaller steps</b></p><br>						
						<ul class="fragment">
							<li>Be prepared to lots of little tiny steps</li>
							<li>Leverage automated refactoring tools <em>[Eclipse / IntelliJ]</em></li>							
						</ul>
					</section>
					<section><h2>What you should test?</h2><br>
						<p class="fragment"><b>Everything!</b></p><br>		
						<p class="fragment"><b>"Until fear is transformed into boredom"</b></p><br>		
						<ul class="fragment">
							<li>Conditionals</li>				
							<li>Loops</li>				
							<li>Operations</li>				
							<li>Polymorphism</li>
						</ul>				
					</section>
					<section><h2>How do you know if you have good tests?</h2><br>
						<p class="fragment"><b>Tests are in trouble if:</b></p><br>		
						<ul class="fragment">
							<li>Long setup code</li>				
							<li>Setup duplication</li>				
							<li>Long running tests</li>				
							<li>Fragile tests</li>
						</ul>
					</section>
					<section><h3>How much feedback do you need?</h3><br>
						<p class="fragment"><b>You'll have to decide. You control it!</b></p><br>						
					</section>
					<section><h2>Benefits</h2><br>
						<ul class="fragment">
							<li>Reduces defects</li>				
							<li>Prevents build breaks</li>				
							<li>Less stress</li>				
							<li>Less fear</li>
							<li>Automatic programmer documentation</li>							
						</ul>												
					</section>								
				</section>	

				<section>
					<section>
						<h2>Code Quality Study</h2><br>
						<h4>TDD (vs.) Non-TDD Projects</h4><br>
						<p class="fragment"><b>TDD Projects: JUnit, Math, Fitnesse, Hudson</b></p>
						<p class="fragment"><b>Non-TDD Projects: Jericho, JAMWiki, JSPWiki, XWiki</b></p>
					</section>
					<section>
						<h2>Effect of TDD on Cohesion</h2><br>
						<img src="img/cohesion.png" style="border:none;">
						<small><p><em>Source: Quantitatively Evaluating TDD On Open Source Projects - Rod Hilton</em></p></small>
					</section>
					<section>
						<h2>Effect of TDD on Coupling</h2><br>
						<img src="img/coupling.png" style="border:none;">
						<small><p><em>Source: Quantitatively Evaluating TDD On Open Source Projects - Rod Hilton</em></p></small>
					</section>
					<section>
						<h2>Effect of TDD on Complexity</h2><br>
						<img src="img/complexity.png" style="border:none;">
						<small><p><em>Source: Quantitatively Evaluating TDD On Open Source Projects - Rod Hilton</em></p></small>
					</section>
					<section>
						<h2>Summary</h2><br>
						<ul class="fragment">
							<li><span class="semiBig">21.33%</span> Cohesion Improvement</li>
							<li><span class="semiBig">10.05%</span> Coupling Improvement</li>
							<li><span class="semiBig">30.98%</span> Complexity Improvement</li>
						</ul><br><br>
						<small><p><em>Source: Quantitatively Evaluating TDD On Open Source Projects - Rod Hilton</em></p></small>
					</section>
				</section>	

				<section>
					<section>
						<h1>Closure</h1><br>
						<p>							
							<div id="progressbar1" class="big-red fragment"></div><br>												
							<div id="progressbar2" class="big-green fragment"></div><br>
							<div id="progressbar3" class="big-blue fragment"></div>
						</p>
					</section>					
				</section>							
				
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>
		<script src="js/jquery-1.9.1.min.js"></script>
		<script src="lib/js/jquery-ui.js"></script>

		<script>
			Reveal.initialize({
				controls: true, progress: true, history: true, center: true,
				theme: 'serif', // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', 
				
				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]					
			});

			function currentPageFormatter(event) {
		        var formattedStr;
		        if (event.indexh === 0) {
		            return "";
		        }
		        formattedStr = event.indexh;
		        if (event.indexv) {
		            formattedStr += "/" + event.indexv;
		        }
		 		return formattedStr;
		    }
		 
		    Reveal.addEventListener( 'ready', function( event ) {
		        $('<aside class="controls slide-number" style="display: block; left: 10px; right: initial;bottom: -30px; text-align: center;"></aside>')
		            .text(currentPageFormatter(event))
		            .appendTo('.reveal.center');
		    });
		 
		    // Fires each time a new slide is activated
		    Reveal.addEventListener( 'slidechanged', function( event ) {
		        // event.previousSlide, event.currentSlide, event.indexh, event.indexv
		        $(".slide-number").text(currentPageFormatter(event));
		    });

		    $(function() {
			    $( "#progressbar1" ).progressbar({
			      value: false
				});
				$( "#progressbar2" ).progressbar({
			      value: false
				});
				$( "#progressbar3" ).progressbar({
			      value: false
				});				
			});			

		</script>

	</body>
</html>